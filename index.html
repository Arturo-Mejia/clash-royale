<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <title>Ciclo de cofres CR</title>
    <link rel="shortcut icon" href="img/legendario.png">
</head>
<body class="des">
  <div class="formulario">
    <h1>Ciclo de cofres de clash royale</h1><br>
    <p>En esta pagina podrás ver el ciclo de cofres de tu cuenta de clash royale y saber cuales son los próximos cofres que te dará el juego</p>
    <p>puedes ver tu tag de jugador dando click sobre tu numbre en el juego, posteriormente se abrirá una ventana en donde podrás ver y copiar tu tag de jugador
    </p>

    <div class="flex">
      <img class="imgt" src="img/tag1.png" width="20%">
      <img class="imgt" src="img/tag2.png" width="20%">
    </div>
 
   
    <div class="flex">
      <div class="form-inline">
        <div class="form-group mb-2">
        </div>
        <div class="form-group mx-sm-3 mb-2">
          <label for="inputPassword2" class="sr-only mb-2">Tag de jugador</label>
          <input type="text" class="form-control" id="tagj" placeholder="#8QYVC9RP9">
        </div>
        <button type="button" class="btn btn-primary mb-2" onclick="getcofres();">Ver ciclo de cofres</button>
      </div>
    </div>
    
  </div>
  
  <div id="cf" class="contenido-cofres" style="display: none;">
    <div style="display: block; text-align: center;">
    <h3>Los próximos cofres te saldrán en este orden</h3><br>
    </div>
<div id="cofres">
</div>
  </div>

 <script>

   function validartag()
   {
      let numeral=document.getElementById("tagj").value.substring(0,1); 
      if(numeral=="#")
      {
        return true;
      } else
      {
        alert('El tag de usuario debe comenzar con el signo "#"'); 
        return false;
      }
   }

   function getcofres()
  {  
    if(document.getElementById("tagj").value=="")
    {
      alert("Ingrese un tag de jugador");
    } else
    { 

      if(validartag())
      { 
         document.getElementById("cf").style.display="block";
        document.getElementById("cofres").innerHTML='<div class="lds-ripple"><div></div><div></div></div>';
      let tag=document.getElementById("tagj").value.substring(1);
      const http=new XMLHttpRequest();
     const url="getjson.php?tag="+tag;
     http.onreadystatechange= function()
     {
         if(this.readyState == 4 && this.status==200)
         {
             document.getElementById("cofres").innerHTML=this.responseText;
             var element = document.getElementById("cf");

            element.scrollIntoView();
            element.scrollIntoView(false);
            element.scrollIntoView({block: "start"});
            element.scrollIntoView({block: "start", behavior: "smooth"});
         }
     }  
 
     http.open("GET",url);
     http.send(); 

      }
      
    }
  }
 </script>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>
